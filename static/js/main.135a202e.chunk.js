(this["webpackJsonpclient-list"]=this["webpackJsonpclient-list"]||[]).push([[0],{125:function(e,t,n){},127:function(e,t,n){},129:function(e,t,n){},130:function(e,t,n){},134:function(e,t,n){},239:function(e,t,n){},250:function(e,t,n){},252:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),s=n(16),c=n.n(s),a=(n(125),n(126),n(127),n(21)),o=(n(128),n(7)),d=n(8),l=n(12),u=n(13),h=(n(129),n(259)),j=n(263),p=n(9),v=n(41),b=(n(130),n(261)),O=n(262),f=n(17);var m,C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2?arguments[2]:void 0,r={method:t,headers:{"Content-Type":"application/json"}};return n&&(r.body=JSON.stringify(n)),fetch(e,r).then((function(e){return e.json()})).then((function(e){if(e.error)throw e.error;return e}))},g="ERROR",x="LOADING",S="GET_CLIENTS_SUCCESS",y="GET_PROVIDERS_SUCCESS",P="ADD_PROVIDER_SUCCESS",w="ADD_CLIENT_SUCCESS",L="EDIT_CLIENT_SUCCESS",k="EDIT_PROVIDER_SUCCESS",E="REMOVE_PROVIDER_SUCCESS",M="REMOVE_CLIENT_SUCCESS";m="https://client-list-api.herokuapp.com";var N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="".concat(m,"/client"),n="?";for(var r in e)n="?".concat(r,"=").concat(e[r],"&");return"?"===n&&(n=""),function(e){e({type:x}),C(t+n).then((function(t){e({type:S,clientList:t})})).catch((function(t){e({type:g,errorMessage:t.message})}))}},_=function(e){return function(t){t({type:x}),C("".concat(m,"/provider"),"POST",e).then((function(e){t({type:P,provider:e})})).catch((function(e){t({type:g,errorMessage:e.message})}))}},R=(n(134),n(52)),T=n(56),D=n(260),I=n(257),A=n(2),H=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={checkbox:!1,edit:!1,inputValue:e.props.provider.name},e.handleCheck=function(t){e.props.handleCheck(t),e.setState({checkbox:!e.state.checkbox})},e.handleKeyDown=function(t){if("Enter"===t.key){var n={name:e.state.inputValue,_id:e.props.provider._id};e.props.editProvider(n),e.setState({edit:!1})}},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.checkedProvider&&this.props.checkedProvider.includes(this.props.provider.name)?this.setState({checkbox:!0}):this.setState({checkbox:!1})}},{key:"render",value:function(){var e=this,t=this.props.provider;return Object(A.jsxs)("div",{className:"provWrapper",children:[Object(A.jsxs)("div",{className:"provName",children:[Object(A.jsx)("input",{name:t.name,type:"checkbox",id:t.name,onChange:function(t){return e.handleCheck(t)},checked:this.state.checkbox}),this.state.edit?Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(D.a,{trigger:"focus",placement:"right-start",overlay:Object(A.jsx)(I.a,{id:"tooltip-bottom-start",children:"Press Enter to save provider name."}),children:Object(A.jsx)("input",{className:"editInput",type:"text",value:this.state.inputValue,onChange:function(t){return e.setState({inputValue:t.target.value})},onKeyDown:this.handleKeyDown})})}):Object(A.jsx)("label",{htmlFor:t.name,children:t.name})]}),Object(A.jsxs)("div",{children:[Object(A.jsx)("button",{onClick:function(){return e.setState({edit:!e.state.edit})},children:Object(A.jsx)(R.a,{icon:T.a,color:"#210794"})}),Object(A.jsx)("button",{onClick:function(){return e.props.removeProvider(t)},children:Object(A.jsx)(R.a,{icon:T.c,color:"#ce0f0f"})})]})]},t._id)}}]),n}(i.a.Component),B={editProvider:function(e){return function(t){t({type:x}),C("".concat(m,"/provider/").concat(e._id),"PUT",e).then((function(e){t({type:k,provider:e})})).catch((function(e){t({type:g,errorMessage:e.message})}))}},removeProvider:function(e){return function(t){t({type:x}),C("".concat(m,"/provider/").concat(e._id),"DELETE").then((function(n){t({type:E,provider:e})})).catch((function(e){t({type:g,errorMessage:e.message})}))}},getClients:N},V=Object(f.b)((function(e){return{providerList:e.providerList}}),B)(H),F=n(119),U=n(58),q="Required field!",G="Invalid email address!",K="Invalid phone number!",z=U.a().shape({name:U.b().required(q),phone:U.b().matches(/^(([+374]{4}|[0]{1}))?([1-9]{2})(\d{6})$/,K).required(q),email:U.b().email(G).required(q)}),J=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).handleChange=function(e,t){i.setState(Object(v.a)({},t,e.target.value))},i.handleCheck=function(e){var t=new Set(i.state.selectedProviders);t.has(e.target.name)?t.delete(e.target.name):t.add(e.target.name),i.setState({selectedProviders:t})},i.addProvider=function(){var e=i.state.newProvider,t=i.props.providerList.find((function(t){return t.name===e}));e.trim()&&void 0===t?(i.props.addProvider({name:i.state.newProvider.trim()}),i.setState({newProvider:""})):t&&a.b.error("Provider must be unique \u2757\u2757\u2757")},i.addClient=function(e){var t=Object(p.a)(i.state.selectedProviders).map((function(e){return{name:e}})),n={name:e.name,email:e.email,phone:+e.phone,providers:t};i.props.addClient(n),i.props.onClose()},i.inputRef=Object(r.createRef)(),i.state={name:"",email:"",phone:"",newProvider:"",selectedProviders:new Set},i}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.inputRef.current.focus()}},{key:"render",value:function(){var e=this,t=this.props.onClose;return Object(A.jsx)("div",{children:Object(A.jsxs)(b.a,{dialogClassName:"size",centered:!0,show:!0,onHide:t,children:[Object(A.jsx)(b.a.Header,{closeButton:!0,children:Object(A.jsx)(b.a.Title,{children:"Add new Client"})}),Object(A.jsx)(F.a,{initialValues:{name:"",email:"",phone:""},validationSchema:z,onSubmit:function(t){return e.addClient(t)},children:function(n){var r=n.values,i=n.handleChange,s=n.handleBlur,c=n.handleSubmit,a=n.touched,o=n.errors;return Object(A.jsxs)("div",{children:[Object(A.jsxs)(b.a.Body,{children:[Object(A.jsxs)("div",{className:"inputs",children:[Object(A.jsx)("input",{ref:e.inputRef,type:"text",placeholder:"Name *",name:"name",onChange:i,onBlur:s,value:r.name}),Object(A.jsx)(O.a.Text,{className:a.name&&o.name?"text-danger mx-3":"d-none mx-3",children:o.name}),Object(A.jsx)("input",{type:"email",placeholder:"Email *",name:"email",onChange:i,onBlur:s,value:r.email}),Object(A.jsx)(O.a.Text,{className:a.email&&o.email?"text-danger mx-3":"d-none mx-3",children:o.email}),Object(A.jsx)("input",{type:"text",placeholder:"Phone *",name:"phone",onChange:i,onBlur:s,value:r.phone}),Object(A.jsx)(O.a.Text,{className:a.phone&&o.phone?"text-danger mx-3":"d-none mx-3",children:o.phone}),Object(A.jsxs)("div",{className:"addProvider",children:[Object(A.jsx)("input",{type:"text",placeholder:"Providers",value:e.state.newProvider,onChange:function(t){return e.setState({newProvider:t.target.value})}}),Object(A.jsx)(j.a,{onClick:e.addProvider,children:"Add provider"})]})]}),Object(A.jsx)("div",{className:"providerList",children:e.props.providers.map((function(t){return Object(A.jsx)("div",{children:Object(A.jsx)(V,{provider:t,handleCheck:e.handleCheck})},t._id)}))})]}),Object(A.jsxs)(b.a.Footer,{children:[Object(A.jsx)(j.a,{variant:"danger",className:"butn",onClick:t,children:"Cancel"}),Object(A.jsx)(j.a,{variant:"primary",onClick:c,children:"Add Client"})]})]})}})]})})}}]),n}(i.a.PureComponent),$={addProvider:_,addClient:function(e){return function(t){t({type:x}),C("".concat(m,"/client"),"POST",e).then((function(e){t({type:w,client:e})})).catch((function(e){t({type:g,errorMessage:e.message})}))}}},W=Object(f.b)((function(e){return{providerList:e.providerList}}),$)(J),Z=n(11);function Q(e){return Object(A.jsxs)(b.a,{centered:!0,show:!0,onHide:e.handleClose,children:[Object(A.jsx)(b.a.Header,{closeButton:!0,children:Object(A.jsx)(b.a.Title,{children:"Are you sure you want to delete client?"})}),Object(A.jsxs)(b.a.Footer,{children:[Object(A.jsx)(j.a,{onClick:e.handleClose,children:"Close"}),Object(A.jsx)(j.a,{variant:"danger",onClick:e.removeClient,children:"Delete"})]})]})}var X=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).editChangeHandler=function(e,t){r.setState(Object(v.a)({},t,e.target.value))},r.addProvider=function(){var e=r.state.newProvider,t=r.props.providerList.find((function(t){return t.name===e}));e.trim()&&void 0===t?(r.props.addProvider({name:r.state.newProvider.trim()}),r.setState({newProvider:""})):t&&a.b.error("Provider must be unique \u2757\u2757\u2757")},r.handleCheck=function(e){var t=new Set(r.state.selectedProviders);t.has(e.target.name)?t.delete(e.target.name):t.add(e.target.name),r.setState({selectedProviders:t})},r.editClient=function(){var e=r.state,t=e.email,n=e.name,i=e.phone;if(t&&n&&i){if(!t||/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(t))if(!i||/^\d+$/.test(i))if(n&&t&&i){var s=Object(p.a)(r.state.selectedProviders).map((function(e){return{name:e}})),c={name:r.state.name,email:r.state.email,phone:r.state.phone,_id:r.state._id,providers:s};r.props.editClient(c),r.props.onClose()}else a.b.error("All fields marked with * are required \u2757\u2757\u2757");else a.b.error("Phone must contain only numbers \u2757\u2757\u2757");else a.b.error("Write valid email address \u2757\u2757\u2757")}else a.b.error("All fields marked with * are required \u2757\u2757\u2757")},r.toggleConfirm=function(){r.setState({showConfirm:!r.state.showConfirm})},r.removeClient=function(){r.props.removeClient(r.state._id),r.toggleConfirm(),r.props.onClose()},r.inputRef=i.a.createRef(),r.state=Object(Z.a)(Object(Z.a)({},r.props.client),{},{showConfirm:!1,selectedProviders:new Set}),r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.inputRef.current.focus(),this.setState({selectedProviders:new Set(Object(p.a)(this.state.providers.map((function(e){return e.name}))))})}},{key:"render",value:function(){var e=this;return Object(A.jsxs)("div",{children:[Object(A.jsxs)(b.a,{centered:!0,show:!0,onHide:this.props.onClose,children:[Object(A.jsx)(b.a.Header,{closeButton:!0,children:Object(A.jsx)(b.a.Title,{children:"Edit Client"})}),Object(A.jsxs)(b.a.Body,{children:[Object(A.jsxs)("div",{className:"inputs",children:[Object(A.jsx)("input",{ref:this.inputRef,type:"text",placeholder:"Name *",value:this.state.name,onChange:function(t){return e.editChangeHandler(t,"name")}}),Object(A.jsx)("input",{type:"text",placeholder:"Email *",value:this.state.email,onChange:function(t){return e.editChangeHandler(t,"email")}}),Object(A.jsx)("input",{type:"text",placeholder:"Phone *",value:this.state.phone,onChange:function(t){return e.editChangeHandler(t,"phone")}}),Object(A.jsxs)("div",{className:"addProvider",children:[Object(A.jsx)("input",{type:"text",placeholder:"Providers",value:this.state.newProvider,onChange:function(t){return e.editChangeHandler(t,"newProvider")}}),Object(A.jsx)(j.a,{onClick:this.addProvider,children:"Add provider"})]})]}),Object(A.jsx)("div",{className:"providerList",children:this.props.providerList.map((function(t){return Object(A.jsx)(V,{provider:t,checkedProvider:e.state.providers.map((function(e){return e.name})),handleCheck:e.handleCheck})}))})]}),Object(A.jsx)(b.a.Footer,{children:Object(A.jsxs)("div",{className:"btns",children:[Object(A.jsx)(j.a,{variant:"danger",onClick:this.toggleConfirm,children:"Delete Client"}),Object(A.jsxs)("div",{children:[Object(A.jsx)(j.a,{onClick:this.props.onClose,children:"Cancel"}),Object(A.jsx)(j.a,{onClick:this.editClient,children:"Edit Client"})]})]})})]}),this.state.showConfirm&&Object(A.jsx)(Q,{handleClose:this.toggleConfirm,removeClient:this.removeClient})]})}}]),n}(i.a.PureComponent),Y={addProvider:_,editClient:function(e){return function(t){t({type:x}),C("".concat(m,"/client/").concat(e._id),"PUT",e).then((function(e){t({type:L,client:e})})).catch((function(e){t({type:g,errorMessage:e.message})}))}},removeClient:function(e){return function(t){t({type:x}),C("".concat(m,"/client/").concat(e),"DELETE").then((function(n){t({type:M,id:e})})).catch((function(e){t({type:g,errorMessage:e.message})}))}}},ee=Object(f.b)((function(e){return{providerList:e.providerList,errorMessage:e.errorMessage}}),Y)(X),te=n(27),ne=(n(239),n(120)),re=n(258),ie=n(117);var se={getClients:N},ce=Object(f.b)(null,se)((function(e){var t=Object(r.useState)(""),n=Object(te.a)(t,2),i=n[0],s=n[1],c=Object(r.useState)(""),a=Object(te.a)(c,2),o=a[0],d=a[1],l=function(){var t={};i&&(t.search=i),o&&(t.sort=o),e.getClients(t)};return Object(A.jsxs)("div",{className:"advanced",children:[Object(A.jsx)("div",{className:"search",children:Object(A.jsxs)(re.a,{className:"mb-3",children:[Object(A.jsx)(ie.a,{placeholder:"Search","aria-label":"Recipient's username","aria-describedby":"basic-addon2",onChange:function(e){return s(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&l()}}),Object(A.jsx)(re.a.Append,{children:Object(A.jsx)(j.a,{onClick:l,variant:"outline-primary",children:Object(A.jsx)(R.a,{icon:T.b,color:"#210794"})})})]})}),Object(A.jsx)("div",{className:"sort",children:Object(A.jsx)(ne.a,{placeholder:"Sort",options:[{label:"A-Z",value:"a-z"},{label:"Z-A",value:"z-a"}],isClearable:!0,isSearchable:!1,onChange:function(t){if(t){d(t.value);var n={sort:t.value};e.getClients(n)}else d(""),e.getClients()}})})]})})),ae=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).toggleNewClientModal=function(){e.setState({openNewClientModal:!e.state.openNewClientModal})},e.openNewClientModal=function(){e.props.getProviders(),e.setState({openNewClientModal:!e.state.openNewClientModal})},e.toggleEdit=function(t){e.props.getProviders(),e.setState({editClient:t})},e.state={openNewClientModal:!1,editClient:null},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.getClients()}},{key:"render",value:function(){var e=this,t=this.props.clientList;return Object(A.jsxs)("div",{className:"back",children:[Object(A.jsx)(ce,{}),Object(A.jsxs)(h.a,{striped:!0,bordered:!0,hover:!0,children:[Object(A.jsxs)("thead",{children:[Object(A.jsx)("tr",{children:Object(A.jsx)("th",{colSpan:"5",children:Object(A.jsxs)("div",{className:"clientHeader",children:[Object(A.jsx)("h4",{children:"Clients"}),Object(A.jsx)(j.a,{onClick:this.openNewClientModal,children:"New Client"})]})})}),Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{children:"Name"}),Object(A.jsx)("th",{children:"Email"}),Object(A.jsx)("th",{children:"Phone"}),Object(A.jsx)("th",{children:"Providers"}),Object(A.jsx)("th",{})]})]}),Object(A.jsx)("tbody",{children:t.map((function(t){return Object(A.jsxs)("tr",{children:[Object(A.jsx)("td",{children:t.name}),Object(A.jsx)("td",{children:t.email}),Object(A.jsx)("td",{children:t.phone}),Object(A.jsx)("td",{children:t.providers.map((function(e){return e.name})).join(", ")}),Object(A.jsx)("td",{children:Object(A.jsx)(j.a,{onClick:function(){return e.toggleEdit(t)},children:"Edit"})})]},t._id)}))})]}),this.state.openNewClientModal&&Object(A.jsx)(W,{onClose:this.toggleNewClientModal,providers:this.props.providerList}),this.state.editClient&&Object(A.jsx)(ee,{client:this.state.editClient,onClose:function(){return e.toggleEdit(null)}})]})}}]),n}(i.a.PureComponent),oe={getClients:N,getProviders:function(){var e="".concat(m,"/provider");return function(t){t({type:x}),C(e).then((function(e){t({type:y,providerList:e})})).catch((function(e){t({type:g,errorMessage:e.message})}))}}},de=Object(f.b)((function(e){return{clientList:e.clientList,addClientSuccess:e.addClientSuccess,editClientSuccess:e.editClientSuccess,providerList:e.providerList}}),oe)(ae),le=(n(250),function(){return Object(A.jsx)("div",{className:"loader"})});var ue=Object(f.b)((function(e){return{errorMessage:e.errorMessage,successMessage:e.successMessage,loading:e.loading}}))((function(e){return e.errorMessage&&a.b.error(e.errorMessage),e.successMessage&&a.b.success(e.successMessage),Object(A.jsxs)("div",{className:"App",children:[Object(A.jsx)(de,{}),Object(A.jsx)(a.a,{position:"bottom-left",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),e.loading&&Object(A.jsx)(le,{})]})})),he=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,264)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),i(e),s(e),c(e)}))},je=n(87),pe=(n(251),n(118)),ve={clientList:[],providerList:[],client:null,errorMessage:"",successMessage:"",loading:!1,addClientSuccess:!1,editClientSuccess:!1,editProviderSuccess:!1,addProviderSuccess:!1},be=[pe.a];var Oe=je.a.apply(void 0,be),fe=Object(je.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(Z.a)(Object(Z.a)({},e),{},{loading:!0,addClientSuccess:!1,editClientSuccess:!1,errorMessage:"",successMessage:""});case"ERROR":return Object(Z.a)(Object(Z.a)({},e),{},{errorMessage:"\u274c\u274c\u274c "+t.errorMessage,loading:!1});case S:return Object(Z.a)(Object(Z.a)({},e),{},{clientList:t.clientList,loading:!1});case y:return Object(Z.a)(Object(Z.a)({},e),{},{providerList:t.providerList,loading:!1});case P:var n=[].concat(Object(p.a)(e.providerList),[t.provider]);return Object(Z.a)(Object(Z.a)({},e),{},{providerList:n,loading:!1,successMessage:"\u2705\u2705\u2705 Provider added successfully!!!",addProviderSuccess:!0});case w:var r=[].concat(Object(p.a)(e.clientList),[t.client]);return Object(Z.a)(Object(Z.a)({},e),{},{clientList:r,loading:!1,successMessage:"\u2705\u2705\u2705 Client added successfully!!!",addClientSuccess:!0});case E:for(var i=e.providerList.filter((function(e){return e._id!==t.provider._id})),s=e.clientList.map((function(e){return e.providers})),c=0;c<s.length;c++){var a=s[c].map((function(e){return e._id===t.provider._id})),o=a.indexOf(!0);-1!==o&&e.clientList[c].providers.splice(o,1)}return Object(Z.a)(Object(Z.a)({},e),{},{providerList:i,clientList:Object(p.a)(e.clientList),loading:!1,successMessage:"\ud83d\uddd1\ud83d\uddd1\ud83d\uddd1 Provider deleted successfully!!!"});case M:var d=e.clientList.filter((function(e){return e._id!==t.id}));return Object(Z.a)(Object(Z.a)({},e),{},{clientList:d,loading:!1,successMessage:"\ud83d\uddd1\ud83d\uddd1\ud83d\uddd1 Client deleted successfully!!!"});case L:var l=Object(p.a)(e.clientList),u=l.findIndex((function(e){return e._id===t.client._id}));return l[u]=t.client,Object(Z.a)(Object(Z.a)({},e),{},{clientList:l,loading:!1,successMessage:"\ud83d\udd8d\ud83d\udd8d\ud83d\udd8d Client edited successfully!!!",editClientSuccess:!0});case k:var h=Object(p.a)(e.providerList),j=h.findIndex((function(e){return e._id===t.provider._id}));h[j]=t.provider;for(var v=e.clientList.map((function(e){return e.providers})),b=0;b<v.length;b++){var O=v[b].map((function(e){return e._id===t.provider._id})),f=O.indexOf(!0);-1!==f&&(e.clientList[b].providers[f]=t.provider)}return Object(Z.a)(Object(Z.a)({},e),{},{providerList:h,loading:!1,successMessage:"\ud83d\udd8d\ud83d\udd8d\ud83d\udd8d Provider edited successfully!!!",editProviderSuccess:!0});default:return e}}),Oe);c.a.render(Object(A.jsx)(f.a,{store:fe,children:Object(A.jsx)(ue,{})}),document.getElementById("root")),he()}},[[252,1,2]]]);
//# sourceMappingURL=main.135a202e.chunk.js.map